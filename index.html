<!doctype html>
<html lang="pt-br">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Jogo da MemÃ³ria</title>
  <style>
    :root {
      --bg: #0f172a;          /* slate-900 */
      --panel: #111827;       /* gray-900 */
      --card: #1f2937;        /* gray-800 */
      --accent: #22d3ee;      /* cyan-400 */
      --ok: #34d399;          /* emerald-400 */
      --text: #e5e7eb;        /* gray-200 */
      --muted: #9ca3af;       /* gray-400 */
    }
    * { box-sizing: border-box; }
    body {
      margin: 0; min-height: 100dvh; display: grid; place-items: center;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
      background: radial-gradient(1200px 800px at 20% 10%, #0b1229 0%, var(--bg) 60%);
      color: var(--text);
    }
    .app { width: min(900px, 92vw); }
    header {
      display: flex; align-items: center; justify-content: space-between; gap: 12px; margin-bottom: 14px;
    }
    h1 { font-size: 20px; margin: 0; letter-spacing: .5px; }
    .stats { display: flex; gap: 12px; flex-wrap: wrap; }
    .badge {
      background: var(--panel); border: 1px solid #1f2937; padding: 8px 10px; border-radius: 10px;
      font-size: 13px; color: var(--muted);
    }
    .badge b { color: var(--text); }
    button {
      background: var(--accent); color: #0b1320; border: 0; padding: 9px 14px; border-radius: 10px;
      font-weight: 700; cursor: pointer; transition: transform .04s ease, filter .2s ease;
    }
    button:active { transform: translateY(1px); }
    .grid {
      display: grid; gap: 10px; grid-template-columns: repeat(4, 1fr);
      background: linear-gradient(180deg, #0e162f 0%, #0a1024 100%); padding: 12px; border-radius: 16px;
      box-shadow: 0 10px 25px rgba(0,0,0,.35), inset 0 0 0 1px #1e2a4a;
    }
    @media (min-width: 640px) { .grid { gap: 12px; padding: 16px; } }
    .card {
      position: relative; aspect-ratio: 1/1; perspective: 800px; cursor: pointer;
    }
    .card-inner {
      position: absolute; inset: 0; border-radius: 14px; transform-style: preserve-3d;
      transition: transform .5s cubic-bezier(.2,.8,.2,1);
    }
    .card.flipped .card-inner { transform: rotateY(180deg); }
    .face {
      position: absolute; inset: 0; display: grid; place-items: center; font-size: clamp(24px, 5vw, 36px);
      border-radius: 14px; backface-visibility: hidden; user-select: none;
    }
    .front {
      background: linear-gradient(145deg, #101828, #0a0f22);
      border: 1px solid #1f2937;
      box-shadow: 0 6px 14px rgba(0,0,0,.35), inset 0 0 0 1px rgba(255,255,255,.02);
    }
    .back {
      background: radial-gradient(120px 120px at 30% 25%, #23365d 0%, #16213d 50%, #131b33 100%);
      border: 1px solid #23314d;
      transform: rotateY(180deg);
      box-shadow: inset 0 0 0 1px rgba(255,255,255,.04), 0 4px 12px rgba(0,0,0,.35);
    }
    .matched .back { outline: 2px solid var(--ok); }
    footer { text-align: center; margin-top: 12px; color: var(--muted); font-size: 12px; }
    .hidden { visibility: hidden; }
  </style>
</head>
<body>
  <div class="app">
    <header>
      <h1>ðŸ§  Jogo da MemÃ³ria</h1>
      <div class="stats">
        <div class="badge">Jogadas: <b id="moves">0</b></div>
        <div class="badge">Tempo: <b id="time">00:00</b></div>
        <div class="badge">Melhor: <b id="best">â€”</b></div>
        <button id="reset">Novo Jogo</button>
      </div>
    </header>

    <main class="grid" id="grid" aria-label="Tabuleiro do jogo"></main>
    <footer>Feito para portfÃ³lio â€“ sem dependÃªncias, pronto para GitHub Pages.</footer>
  </div>

  <script>
    // --- Config ---
    const EMOJIS = ["ðŸ•","ðŸš€","ðŸ¶","ðŸŒŸ","ðŸŽ§","ðŸ§©","âš¡ï¸","ðŸ©"]; // 8 pares = 16 cartas
    const gridEl = document.getElementById('grid');
    const movesEl = document.getElementById('moves');
    const timeEl  = document.getElementById('time');
    const bestEl  = document.getElementById('best');
    const resetBtn= document.getElementById('reset');

    let deck = [];
    let first = null, lock = false, moves = 0, matched = 0;
    let startTime = null, timerId = null;

    // --- Util ---
    const pad = n => String(n).padStart(2,'0');
    const fmt = s => `${pad(Math.floor(s/60))}:${pad(s%60)}`;

    function shuffle(arr) {
      for (let i = arr.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [arr[i], arr[j]] = [arr[j], arr[i]];
      }
      return arr;
    }

    function saveBest(seconds) {
      const key = 'memory_best_4x4';
      const best = Number(localStorage.getItem(key) || Infinity);
      if (seconds < best) localStorage.setItem(key, String(seconds));
    }

    function loadBest() {
      const key = 'memory_best_4x4';
      const v = localStorage.getItem(key);
      bestEl.textContent = v ? fmt(Number(v)) : "â€”";
    }

    function startTimer() {
      if (timerId) return;
      startTime = Date.now();
      timerId = setInterval(() => {
        const s = Math.floor((Date.now() - startTime) / 1000);
        timeEl.textContent = fmt(s);
      }, 200);
    }

    function stopTimer() {
      if (!timerId) return 0;
      clearInterval(timerId);
      timerId = null;
      return Math.floor((Date.now() - startTime) / 1000);
    }

    // --- Game ---
    function buildDeck() {
      const pairs = [...EMOJIS, ...EMOJIS].map((emoji, i) => ({
        id: i, emoji, matched: false
      }));
      return shuffle(pairs);
    }

    function render() {
      gridEl.innerHTML = '';
      deck.forEach((card, idx) => {
        const li = document.createElement('div');
        li.className = 'card';
        li.setAttribute('role', 'button');
        li.setAttribute('aria-label', 'Carta');
        li.dataset.index = idx;

        li.innerHTML = `
          <div class="card-inner">
            <div class="face front">?</div>
            <div class="face back">${card.emoji}</div>
          </div>
        `;
        gridEl.appendChild(li);
      });
    }

    function flip(el, on=true) {
      el.classList.toggle('flipped', on);
    }

    function getCardEl(index) {
      return gridEl.children[index];
    }

    function markMatched(i1, i2) {
      [i1, i2].forEach(i => {
        const el = getCardEl(i);
        el.classList.add('matched');
      });
    }

    function onCardClick(e) {
      const cardEl = e.target.closest('.card');
      if (!cardEl || lock) return;

      const i = Number(cardEl.dataset.index);
      const card = deck[i];
      const inner = cardEl.querySelector('.card-inner');
      const alreadyFlipped = cardEl.classList.contains('flipped');

      if (card.matched || alreadyFlipped) return;

      startTimer();
      flip(cardEl, true);

      if (first === null) {
        first = i;
        return;
      }

      // second pick
      moves++;
      movesEl.textContent = moves;

      const c1 = deck[first], c2 = card;
      const el1 = getCardEl(first), el2 = cardEl;

      if (c1.emoji === c2.emoji) {
        c1.matched = c2.matched = true;
        markMatched(first, i);
        matched += 2;
        first = null;

        if (matched === deck.length) {
          const seconds = stopTimer();
          saveBest(seconds);
          loadBest();
          // pequena celebraÃ§Ã£o visual
          document.body.animate([{ filter: 'brightness(1)' }, { filter: 'brightness(1.3)' }, { filter: 'brightness(1)' }], {
            duration: 600, iterations: 1, easing: 'ease-out'
          });
        }
      } else {
        lock = true;
        setTimeout(() => {
          flip(el1, false);
          flip(el2, false);
          first = null;
          lock = false;
        }, 650);
      }
    }

    function newGame() {
      stopTimer();
      timeEl.textContent = "00:00";
      moves = 0; matched = 0; first = null; lock = false;
      movesEl.textContent = 0;
      deck = buildDeck();
      render();
    }

    // --- Init ---
    gridEl.addEventListener('click', onCardClick);
    resetBtn.addEventListener('click', newGame);
    loadBest();
    newGame();
  </script>
</body>
</html>
